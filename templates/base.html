{% load static %}

<!DOCTYPE html>
<html lang="en" dir="rtl">

<head>
    <!--=====================================
                    META TAG PART START
        =======================================-->
    <!-- REQUIRE META -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- SEO META -->
    <meta name="title" content="واصِل للمياه – توصيل مياه نقية إلى باب منزلك في السعودية">
    <meta name="description"
        content="واصِل للمياه يقدم خدمة توصيل مياه الشرب النقية إلى المنازل والمكاتب بجودة عالية وسرعة في التوصيل. اطلب الآن بكل سهولة!">
    <meta name="keywords"
        content=" المياه, مياه نقية, توصيل مياه, شراء مياه, واصل للمياه, مياه طبيعية, مياه معدنية, متجر مياه, مياه للمنازل, مياه للمكاتب, مياه السعودية">
    <meta name="author" content="شركة واصِل للمياه">
    <meta name="robots" content="index, follow">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!--=====================================
                    META-TAG PART END
        =======================================-->

    <!-- WEBPAGE TITLE -->
    <title>{{ title }}</title>

    <!--=====================================
                    CSS LINK PART START
        =======================================-->
    <!-- FAVICON -->
    <link rel="icon" href="{% static 'ar/images/favicon.png' %}">

    <!-- FONTS -->
    <link rel="stylesheet" href="{% static 'ar/fonts/flaticon/flaticon.css' %}">
    <link rel="stylesheet" href="{% static 'ar/fonts/icofont/icofont.min.css' %}">
    <link rel="stylesheet" href="{% static 'ar/fonts/fontawesome/fontawesome.min.css' %}">

    <!-- VENDOR -->
    <link rel="stylesheet" href="{% static 'ar/vendor/venobox/venobox.min.css' %}">
    <link rel="stylesheet" href="{% static 'ar/vendor/slickslider/slick.min.css' %}">
    <link rel="stylesheet" href="{% static 'ar/vendor/niceselect/nice-select.min.css' %}">
    <link rel="stylesheet" href="{% static 'ar/vendor/bootstrap/bootstrap.min.css' %}">

    <!-- CUSTOM -->
    <link rel="stylesheet" href="{% static 'ar/css/main.css' %}">
    <link rel="stylesheet" href="{% static 'ar/css/index.css' %}">
    <link rel="stylesheet" href="{% static 'ar/css/header_redesign.css' %}">


    <!--=====================================
                    CSS LINK PART END
        =======================================-->
</head>

<body>
    <div class="backdrop"></div>
    <a class="backtop fas fa-arrow-up" href="#"></a>

    <!--=====================================
                    HEADER TOP PART START
        =======================================-->
    <!--=====================================
                    HEADER TOP PART START
        =======================================-->
    <div class="header-top">
        <div class="container">
            <div class="row">
                <div class="col-md-7 col-lg-6">
                    <div class="header-top-welcome">
                        <p>عرض خاص: مياه نقية لكل لحظة</p>
                    </div>
                </div>
                <div class="col-md-5 col-lg-6">
                    <ul class="header-top-list">
                        <li><a href="contact.html">اتصل بنا</a></li>
                        <li><a href="faq.html">المساعدة</a></li>
                        <li><a href="#">الايميل</a></li>
                        <li><a href="tel:0552485655">0552485655</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!--=====================================
                    HEADER TOP PART END 
        =======================================-->


    <!--=====================================
                    HEADER PART START
        =======================================-->
    <header class="header-part">
        <div class="container">
            <div class="header-content">
                <a href="/" class="header-logo">
                    <img src="{{ company_logo }}" alt="logo">
                </a>

                <form class="header-form">
                    <input type="text" placeholder="ابحث هنا...">
                    <button><i class="fas fa-search"></i></button>
                </form>

                <div class="header-media-group">
                    <a href="{% url 'login' %}" class="header-user"><img src="{% static 'ar/images/user.png' %}"
                            alt="user"></a>
                    <button class="header-cart" title="Cartlist">
                        <img src="{% static 'ar/images/cart.png' %}" alt="cart">
                        <!-- Assuming cart icon exists or using font icon -->
                        <sup>9+</sup>
                    </button>
                </div>

                <div class="header-widget-group">
                    <a href="{% url 'cart:cart_detail' %}" class="header-widget header-cart" title="سلة المشتريات">
                        <i class="fas fa-shopping-cart"></i>
                        <sup class="cart-count">{{ cart|length }}</sup>
                    </a>
                    {% if request.user.is_authenticated %}
                    <div class="dropdown">
                        <a href="#" class="header-widget dropdown-toggle user-dropdown-toggle" data-bs-toggle="dropdown" data-bs-offset="0,15">
                            <i class="fas fa-user"></i>
                            <span>أهلا، {{ request.user.username }}</span>
                        </a>
                        <ul class="dropdown-menu user-dropdown-anim">
                            <li class="user-info-header">
                                <div class="user-avatar-placeholder">
                                    {{ request.user.username|slice:":1"|upper }}
                                </div>
                                <div class="user-details">
                                    <span class="user-name">{{ request.user.username }}</span>
                                    <span class="user-role">عميل مميز</span>
                                </div>
                            </li>
                            <li><hr class="dropdown-divider"></li>
                            <li>
                                <a class="dropdown-item {% if request.resolver_match.view_name == 'accounts:dashboard' %}active-page{% endif %}" href="{% url 'accounts:dashboard' %}">
                                    <i class="fas fa-tachometer-alt"></i> ملخص الحساب
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item {% if request.resolver_match.view_name == 'orders:list' %}active-page{% endif %}" href="{% url 'orders:list' %}">
                                    <i class="fas fa-shopping-basket"></i> طلباتي
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item {% if request.resolver_match.view_name == 'orders:pending_list' %}active-page{% endif %}" href="{% url 'orders:pending_list' %}">
                                    <i class="fas fa-clock"></i> بانتظار الدفع
                                </a>
                            </li>
                            <li><hr class="dropdown-divider"></li>
                            <li>
                                <a class="dropdown-item {% if request.resolver_match.view_name == 'accounts:settings' %}active-page{% endif %}" href="{% url 'accounts:settings' %}">
                                    <i class="fas fa-cog"></i> الإعدادات
                                </a>
                            </li>
                            <li>
                                <form action="{% url 'logout' %}" method="post">
                                    {% csrf_token %}
                                    <button class="dropdown-item disconnect-item" type="submit"><i class="fas fa-sign-out-alt"></i> تسجيل خروج</button>
                                </form>
                            </li>
                        </ul>
                    </div>
                    {% else %}
                    <a href="{% url 'login' %}" class="header-widget" title="تسجيل الدخول">
                        <i class="fas fa-user"></i>
                        <span style="font-size: 14px; margin-right:5px;">دخول</span>
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </header>
    <!--=====================================
                    HEADER PART END
        =======================================-->


    <!--=====================================
                    NAVBAR PART START
        =======================================-->
    <nav class="navbar-part">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="navbar-content">
                        <ul class="navbar-list">
                            <li class="navbar-item">
                                <a class="navbar-link {% if request.resolver_match.url_name == 'home' %}active{% endif %}"
                                    href="{% url 'home' %}">الرئيسية</a>
                            </li>
                            <li class="navbar-item">
                                <a class="navbar-link {% if request.resolver_match.url_name == 'product_list' %}active{% endif %}"
                                    href="{% url 'product_list' %}">المنتجات</a>
                            </li>
                            <li class="navbar-item dropdown">
                                <a class="navbar-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    العلامات التجارية
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                    <li><a class="dropdown-item" href="{% url 'brand_list' %}">الكل</a></li>
                                    <li><hr class="dropdown-divider"></li>
                                    {% for brand in brands %}
                                    <li><a class="dropdown-item" href="{% url 'brand_detail' brand.slug %}">{{ brand.name }}</a></li>
                                    {% endfor %}
                                </ul>
                            </li>
                            <li class="navbar-item">
                                <a class="navbar-link {% if request.resolver_match.url_name == 'bundle_list' %}active{% endif %}"
                                    href="{% url 'bundle_list' %}">الباقات</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </nav>
    <!--=====================================
                    NAVBAR PART END
        =======================================-->


    <!--=====================================
                CATEGORY SIDEBAR PART START MOBILE
        =======================================-->
    <aside class="category-sidebar">
        <div class="category-header">
            <h4 class="category-title">
                <i class="fas fa-align-left"></i>
                <span>categories</span>
            </h4>
            <button class="category-close"><i class="icofont-close"></i></button>
        </div>
        <ul class="category-list">
            <li class="category-item">
                <a class="category-link dropdown-link" href="#">
                    <i class="flaticon-vegetable"></i>
                    <span>vegetables</span>
                </a>
                <ul class="dropdown-list">
                    <li><a href="#">asparagus</a></li>
                    <li><a href="#">broccoli</a></li>
                    <li><a href="#">carrot</a></li>
                </ul>
            </li>
            <li class="category-item">
                <a class="category-link dropdown-link" href="#">
                    <i class="flaticon-groceries"></i>
                    <span>groceries</span>
                </a>
                <ul class="dropdown-list">
                    <li><a href="#">Grains & Bread</a></li>
                    <li><a href="#">Dairy & Eggs</a></li>
                    <li><a href="#">Oil & Fat</a></li>
                </ul>
            </li>
            <li class="category-item">
                <a class="category-link dropdown-link" href="#">
                    <i class="flaticon-fruit"></i>
                    <span>fruits</span>
                </a>
                <ul class="dropdown-list">
                    <li><a href="#">Apple</a></li>
                    <li><a href="#">Orange</a></li>
                    <li><a href="#">Strawberry</a></li>
                </ul>
            </li>
            <li class="category-item">
                <a class="category-link dropdown-link" href="#">
                    <i class="flaticon-dairy-products"></i>
                    <span>dairy farm</span>
                </a>
                <ul class="dropdown-list">
                    <li><a href="#">Egg</a></li>
                    <li><a href="#">milk</a></li>
                    <li><a href="#">butter</a></li>
                </ul>
            </li>
            <li class="category-item">
                <a class="category-link dropdown-link" href="#">
                    <i class="flaticon-crab"></i>
                    <span>sea foods</span>
                </a>
                <ul class="dropdown-list">
                    <li><a href="#">Lobster</a></li>
                    <li><a href="#">Octopus</a></li>
                    <li><a href="#">Shrimp</a></li>
                </ul>
            </li>
            <li class="category-item">
                <a class="category-link dropdown-link" href="#">
                    <i class="flaticon-salad"></i>
                    <span>diet foods</span>
                </a>
                <ul class="dropdown-list">
                    <li><a href="#">Salmon</a></li>
                    <li><a href="#">Potatoes</a></li>
                    <li><a href="#">Greens</a></li>
                </ul>
            </li>
            <li class="category-item">
                <a class="category-link dropdown-link" href="#">
                    <i class="flaticon-dried-fruit"></i>
                    <span>dry foods</span>
                </a>
                <ul class="dropdown-list">
                    <li><a href="#">noodles</a></li>
                    <li><a href="#">Powdered milk</a></li>
                    <li><a href="#">nut & yeast</a></li>
                </ul>
            </li>
            <li class="category-item">
                <a class="category-link dropdown-link" href="#">
                    <i class="flaticon-fast-food"></i>
                    <span>fast foods</span>
                </a>
                <ul class="dropdown-list">
                    <li><a href="#">mango</a></li>
                    <li><a href="#">plumsor</a></li>
                    <li><a href="#">raisins</a></li>
                </ul>
            </li>
            <li class="category-item">
                <a class="category-link dropdown-link" href="#">
                    <i class="flaticon-cheers"></i>
                    <span>drinks</span>
                </a>
                <ul class="dropdown-list">
                    <li><a href="#">Wine</a></li>
                    <li><a href="#">Juice</a></li>
                    <li><a href="#">Water</a></li>
                </ul>
            </li>
            <li class="category-item">
                <a class="category-link dropdown-link" href="#">
                    <i class="flaticon-beverage"></i>
                    <span>coffee</span>
                </a>
                <ul class="dropdown-list">
                    <li><a href="#">Cappuchino</a></li>
                    <li><a href="#">Espresso</a></li>
                    <li><a href="#">Latte</a></li>
                </ul>
            </li>
            <li class="category-item">
                <a class="category-link dropdown-link" href="#">
                    <i class="flaticon-barbecue"></i>
                    <span>meats</span>
                </a>
                <ul class="dropdown-list">
                    <li><a href="#">Meatball</a></li>
                    <li><a href="#">Sausage</a></li>
                    <li><a href="#">Poultry</a></li>
                </ul>
            </li>
            <li class="category-item">
                <a class="category-link dropdown-link" href="#">
                    <i class="flaticon-fish"></i>
                    <span>fishes</span>
                </a>
                <ul class="dropdown-list">
                    <li><a href="#">Agujjim</a></li>
                    <li><a href="#">saltfish</a></li>
                    <li><a href="#">pazza</a></li>
                </ul>
            </li>
        </ul>
        <div class="category-footer">
            <p>All Rights Reserved by <a href="#">Mironcoder</a></p>
        </div>
    </aside>
    <!--=====================================
                CATEGORY SIDEBAR PART END
        =======================================-->


    <!--=====================================
                  CART SIDEBAR PART START
        =======================================-->
    <aside class="cart-sidebar">
        {% include 'cart/partials/sidebar_cart.html' %}
    </aside>
    <!--=====================================
                    CART SIDEBAR PART END
        =======================================-->


    <!--=====================================
                  NAV SIDEBAR PART START
        =======================================-->
    <aside class="nav-sidebar">
        <div class="nav-header">
            <a href="#"><img src="images/logo.png" alt="logo"></a>
            <button class="nav-close"><i class="icofont-close"></i></button>
        </div>
        <div class="nav-content">
            <div class="nav-btn">
                <a href="login.html" class="btn btn-inline">
                    <i class="fa fa-unlock-alt"></i>
                    <span>join here</span>
                </a>
            </div>
            <!-- This commentable code show when user login or register -->
            <!-- <div class="nav-profile">
                    <a class="nav-user" href="#"><img src="images/user.png" alt="user"></a>
                    <h4 class="nav-name"><a href="profile.html">Miron Mahmud</a></h4>
                </div> -->
            <div class="nav-select-group">
                <div class="nav-select">
                    <i class="icofont-world"></i>
                    <select class="select">
                        <option value="english" selected>English2</option>
                        <option value="bangali">Bangali</option>
                        <option value="arabic">Arabic</option>
                    </select>
                </div>
                <div class="nav-select">
                    <i class="icofont-money"></i>
                    <select class="select">
                        <option value="english" selected>Doller</option>
                        <option value="bangali">Pound</option>
                        <option value="arabic">Taka</option>
                    </select>
                </div>
            </div>
            <ul class="nav-list">
                <li>
                    <a class="nav-link dropdown-link" href="#"><i class="icofont-home"></i>Home</a>
                    <ul class="dropdown-list">
                        <li><a href="home-grid.html">Home grid</a></li>
                        <li><a href="index.html">Home index</a></li>
                        <li><a href="home-classic.html">Home classic</a></li>
                        <li><a href="home-standard.html">Home standard</a></li>
                        <li><a href="home-category.html">Home category</a></li>
                    </ul>
                </li>
                <li>
                    <a class="nav-link dropdown-link" href="#"><i class="icofont-food-cart"></i>shop</a>
                    <ul class="dropdown-list">
                        <li><a href="shop-5column.html">shop 5 column</a></li>
                        <li><a href="shop-4column.html">shop 4 column</a></li>
                        <li><a href="shop-3column.html">shop 3 column</a></li>
                        <li><a href="shop-2column.html">shop 2 column</a></li>
                        <li><a href="shop-1column.html">shop 1 column</a></li>
                    </ul>
                </li>
                <li>
                    <a class="nav-link dropdown-link" href="#"><i class="icofont-page"></i>product</a>
                    <ul class="dropdown-list">
                        <li><a href="product-tab.html">product tab</a></li>
                        <li><a href="product-grid.html">product grid</a></li>
                        <li><a href="product-video.html">product video</a></li>
                        <li><a href="product-simple.html">product simple</a></li>
                    </ul>
                </li>
                <li>
                    <a class="nav-link dropdown-link" href="#"><i class="icofont-bag-alt"></i>my account</a>
                    <ul class="dropdown-list">
                        <li><a href="profile.html">profile</a></li>
                        <li><a href="wallet.html">wallet</a></li>
                        <li><a href="wishlist.html">wishlist</a></li>
                        <li><a href="compare.html">compare</a></li>
                        <li><a href="checkout.html">checkout</a></li>
                        <li><a href="orderlist.html">order history</a></li>
                        <li><a href="invoice.html">order invoice</a></li>
                        <li><a href="email-template.html">email template</a></li>
                    </ul>
                </li>
                <li>
                    <a class="nav-link dropdown-link" href="#"><i class="icofont-lock"></i>authentication</a>
                    <ul class="dropdown-list">
                        <li><a href="login.html">login</a></li>
                        <li><a href="register.html">register</a></li>
                        <li><a href="reset-password.html">reset password</a></li>
                        <li><a href="change-password.html">change password</a></li>
                    </ul>
                </li>
                <li>
                    <a class="nav-link dropdown-link" href="#"><i class="icofont-book-alt"></i>blogs</a>
                    <ul class="dropdown-list">
                        <li><a href="blog-grid.html">blog grid</a></li>
                        <li><a href="blog-standard.html">blog standard</a></li>
                        <li><a href="blog-details.html">blog details</a></li>
                        <li><a href="blog-author.html">blog author</a></li>
                    </ul>
                </li>
                <li><a class="nav-link" href="offer.html"><i class="icofont-sale-discount"></i>offers</a></li>
                <li><a class="nav-link" href="about.html"><i class="icofont-info-circle"></i>about us</a></li>
                <li><a class="nav-link" href="faq.html"><i class="icofont-support-faq"></i>need help</a></li>
                <li><a class="nav-link" href="contact.html"><i class="icofont-contacts"></i>contact us</a></li>
                <li><a class="nav-link" href="privacy.html"><i class="icofont-warning"></i>privacy policy</a></li>
                <li><a class="nav-link" href="coming-soon.html"><i class="icofont-options"></i>coming soon</a></li>
                <li><a class="nav-link" href="error.html"><i class="icofont-ui-block"></i>404 error</a></li>
                <li><a class="nav-link" href="login.html"><i class="icofont-logout"></i>logout</a></li>
            </ul>
            <div class="nav-info-group">
                <div class="nav-info">
                    <i class="icofont-ui-touch-phone"></i>
                    <p>
                        <small>call us</small>
                        <span>(+880) 183 8288 389</span>
                    </p>
                </div>
                <div class="nav-info">
                    <i class="icofont-ui-email"></i>
                    <p>
                        <small>email us</small>
                        <span>support@greeny.com</span>
                    </p>
                </div>
            </div>
            <div class="nav-footer">
                <p>All Rights Reserved by <a href="#">Mironcoder</a></p>
            </div>
        </div>
    </aside>
    <!--=====================================
                  NAV SIDEBAR PART END
        =======================================-->


    <!--=====================================
                    MOBILE-MENU PART START
        =======================================-->
    <div class="mobile-menu">
        <a href="index.html" title="Home Page">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </a>
        <button class="cate-btn" title="Category List">
            <i class="fas fa-list"></i>
            <span>category</span>
        </button>
        <button class="cart-btn" title="Cartlist">
            <i class="fas fa-shopping-basket"></i>
            <span>cartlist</span>
            <sup>9+</sup>
        </button>
        <a href="wishlist.html" title="Wishlist">
            <i class="fas fa-heart"></i>
            <span>wishlist</span>
            <sup>0</sup>
        </a>
        <a href="compare.html" title="Compare List">
            <i class="fas fa-random"></i>
            <span>compare</span>
            <sup>0</sup>
        </a>
    </div>
    <!--=====================================
                    MOBILE-MENU PART END
        =======================================-->


    {% block content %}

    {% endblock %}
    <!--=====================================
                     FOOTER PART START
        =======================================-->
    <footer class="footer-part">
        <div class="container">
            <div class="row">
                <div class="col-sm-6 col-xl-3">
                    <div class="footer-widget">
                        <a class="footer-logo" href="/">
                            <img src="{{ company.logo.url }}" alt="logo">
                        </a>
                        <p class="footer-desc">{{ company.description }}</p>
                        <ul class="footer-social">
                            <li><a class="icofont-facebook" href="#"></a></li>
                            <li><a class="icofont-twitter" href="#"></a></li>
                            <li><a class="icofont-linkedin" href="#"></a></li>
                            <li><a class="icofont-instagram" href="#"></a></li>
                            <li><a class="icofont-brand-whatsapp" href="#"></a></li>

                        </ul>
                    </div>
                </div>
                <div class="col-sm-6 col-xl-3">
                    <div class="footer-widget contact">
                        <h3 class="footer-title">contact us</h3>
                        <ul class="footer-contact">
                            <li>
                                <i class="icofont-ui-email"></i>
                                <p>
                                    <span>{{ company.email }}</span>
                                </p>
                            </li>
                            <li>
                                <i class="icofont-speech-comments"></i>
                                <p>
                                    <span>{{ company.phone }}</span>
                                </p>
                            </li>
                            <li>
                                <i class="icofont-ui-touch-phone"></i>
                                <p>
                                    <span>{{ company.phone }}</span>
                                </p>
                            </li>
                            <li>
                                <i class="icofont-location-pin"></i>
                                <p>{{ company.address }}</p>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col-sm-6 col-xl-3">
                    <div class="footer-widget">
                        <h3 class="footer-title">quick Links</h3>
                        <div class="footer-links">
                            <ul>
                                <li><a href="#">حسابي</a></li>
                                <li><a href="#">طلباتي</a></li>
                                <li><a href="#">تتبع طلب</a></li>
                                <li><a href="#">الاكثر شعبية</a></li>
                                <li><a href="#">الاحدث</a></li>
                            </ul>
                            <ul>
                                <li><a href="#">الموقع</a></li>
                                <li><a href="#">طلبات الجملة</a></li>
                                <li><a href="#">اتصل بنا</a></li>
                                <li><a href="#">الوظائف</a></li>
                                <li><a href="#">الأسئلة الشائعة</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- <div class="col-sm-6 col-xl-3">
                        <div class="footer-widget">
                            <h3 class="footer-title">تحميل التطبيق</h3>
                            <p class="footer-desc">{{ settings.app_description }}</p>
                            <div class="footer-app">
                                <a href="{{ settings.app_url }}"><img src="images/google-store.png" alt="google"></a>
                                <a href="{{ settings.app_url }}"><img src="images/app-store.png" alt="app"></a>
                            </div>
                        </div>
                    </div> -->
            </div>
            <div class="row">
                <div class="col-12">
                    <div class="footer-bottom">
                        <p class="footer-copytext">&copy; جميع الحقوق محفوظة ل <a target="_blank" href="#">الفضاء الامنة
                                للبرمجيات</a></p>
                        <!-- <div class="footer-card">
                                <a href="#"><img src="images/payment/jpg/01.jpg" alt="payment"></a>
                                <a href="#"><img src="images/payment/jpg/02.jpg" alt="payment"></a>
                                <a href="#"><img src="images/payment/jpg/03.jpg" alt="payment"></a>
                                <a href="#"><img src="images/payment/jpg/04.jpg" alt="payment"></a>
                            </div> -->
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!--=====================================
                      FOOTER PART END
        =======================================-->


    <!--=====================================
                    JS LINK PART START
        =======================================-->
    <!-- DELETE CONFIRMATION MODAL -->
    <div class="modal fade" id="deleteConfirmModal" tabindex="-1" aria-labelledby="deleteConfirmModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-sm">
            <div class="modal-content" style="background-color: #ffffff; border-radius: 20px; border: 0; box-shadow: 0 10px 40px rgba(0,0,0,0.2);">
                <div class="modal-body text-center p-4">
                    <div class="mb-3" style="width: 70px; height: 70px; background: #fff5f5; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center;">
                        <i class="icofont-trash" style="font-size: 32px; color: #ff3838;"></i>
                    </div>
                    <h5 class="mb-2" style="font-weight: 800; color: #000;">حذف المنتج؟</h5>
                    <p class="mb-4" style="color: #444; font-size: 15px; line-height: 1.6; font-weight: 500;">سيتم إزالة هذا المنتج نهائياً من سلة مشترياتك.</p>
                    
                    <div class="d-flex gap-2 justify-content-center" style="gap: 10px;">
                        <button type="button" class="btn btn-light flex-grow-1" data-bs-dismiss="modal" style="border-radius: 12px; font-weight: 600; color: #555; background: #f5f5f5; border: 1px solid #eee;">إلغاء</button>
                        <button type="button" class="btn flex-grow-1" id="confirmDeleteBtn" style="border-radius: 12px; font-weight: 600; background: #ff3838; color: #fff; box-shadow: 0 4px 15px rgba(255, 56, 56, 0.25); border: none;">نعم، احذف</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- VENDOR -->
    <script src="{% static 'ar/vendor/bootstrap/jquery-1.12.4.min.js' %}"></script>
    <script src="{% static 'ar/vendor/bootstrap/popper.min.js' %}"></script>
    <script src="{% static 'ar/vendor/bootstrap/bootstrap.min.js' %}"></script>
    <script src="{% static 'ar/vendor/countdown/countdown.min.js' %}"></script>
    <script src="{% static 'ar/vendor/niceselect/nice-select.min.js' %}"></script>
    <script src="{% static 'ar/vendor/slickslider/slick.min.js' %}"></script>
    <script src="{% static 'ar/vendor/venobox/venobox.min.js' %}"></script>

    <!-- CUSTOM -->
    <script src="{% static 'ar/js/nice-select.js' %}"></script>
    <script src="{% static 'ar/js/countdown.js' %}"></script>
    <script src="{% static 'ar/js/accordion.js' %}"></script>
    <script src="{% static 'ar/js/venobox.js' %}"></script>
    <script src="{% static 'ar/js/slick.js' %}"></script>
    <script src="{% static 'ar/js/main.js' %}?v=5"></script>
    
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Hover effect for Brand Dropdown
            var dropdowns = document.querySelectorAll('.navbar-item.dropdown');
            dropdowns.forEach(function (dropdown) {
                dropdown.addEventListener('mouseenter', function () {
                    var menu = this.querySelector('.dropdown-menu');
                    var toggle = this.querySelector('.dropdown-toggle');
                    if (menu && window.innerWidth >= 992) {
                        menu.classList.add('show');
                        toggle.setAttribute('aria-expanded', 'true');
                    }
                });

                dropdown.addEventListener('mouseleave', function () {
                    var menu = this.querySelector('.dropdown-menu');
                    var toggle = this.querySelector('.dropdown-toggle');
                    if (menu && window.innerWidth >= 992) {
                        menu.classList.remove('show');
                        toggle.setAttribute('aria-expanded', 'false');
                    }
                });
            });
            
            // AJAX Add to Cart
            const addToCartBtns = document.querySelectorAll('.product-add, .add-to-cart-btn');
            addToCartBtns.forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const productId = this.getAttribute('data-id');
                    if (!productId) return; 

                    const originalText = this.innerHTML;
                    this.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
                    this.style.pointerEvents = 'none';

                    const formData = new FormData();
                    formData.append('product_id', productId);
                    formData.append('csrfmiddlewaretoken', '{{ csrf_token }}');

                    fetch('{% url "cart:cart_add" %}', {
                        method: 'POST',
                        body: formData
                    })
                    .then(response => {
                        if (!response.ok) {
                            return response.json().then(errData => { throw new Error(errData.error || 'Server Error'); });
                        }
                        return response.json();
                    })
                    .then(data => {
                        if(data.error) throw new Error(data.error);
                        
                        // Update Cart Count
                        document.querySelectorAll('.cart-count').forEach(el => el.textContent = (data.cart_count !== undefined ? data.cart_count : data.qty));
                        
                        // Show Success State on Button
                        this.innerHTML = '<i class="fas fa-check"></i> تم';
                        this.classList.add('btn-success');

                        // Reset button after 2 seconds
                        setTimeout(() => {
                            this.innerHTML = originalText;
                            this.style.pointerEvents = 'auto';
                            this.classList.remove('btn-success');
                        }, 2000);

                        // Update Sidebar HTML
                        const sidebar = document.querySelector('.cart-sidebar');
                        if (sidebar && data.cart_html) {
                            sidebar.innerHTML = data.cart_html;
                            
                            // Re-bind close event for the new content (include standard close button AND custom continue button)
                            const closeBtns = sidebar.querySelectorAll('.cart-close, .trigger-close-sidebar');
                            closeBtns.forEach(btn => {
                                btn.addEventListener('click', function() {
                                    document.body.style.overflow = 'inherit';
                                    sidebar.classList.remove('active');
                                    document.querySelector('.backdrop').style.display = 'none';
                                });
                            });
                            
                            // Open Sidebar
                            document.body.style.overflow = 'hidden';
                            sidebar.classList.add('active');
                            const backdrop = document.querySelector('.backdrop');
                            if(backdrop) {
                                backdrop.style.display = 'block';
                                // Re-bind backdrop click to close
                                backdrop.onclick = function() {
                                    this.style.display = 'none';
                                    document.body.style.overflow = 'inherit';
                                    sidebar.classList.remove('active');
                                };
                            }
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        this.innerHTML = 'خطأ';
                        // Alert the specific error for debugging
                        alert('حدث خطأ: ' + error.message);
                        setTimeout(() => {
                            this.innerHTML = originalText;
                            this.style.pointerEvents = 'auto';
                        }, 2000);
                    });
                });
            });

            // AJAX Update Quantity (Sidebar & Cart Page)
            $(document).on('change', '.action-input', function() {
                var input = $(this);
                var productId = input.data('id');
                var quantity = input.val();

                if(!productId) return;

                $.ajax({
                    url: '{% url "cart:cart_update" %}',
                    type: 'POST',
                    data: {
                        'product_id': productId,
                        'quantity': quantity,
                        'csrfmiddlewaretoken': '{{ csrf_token }}'
                    },
                    success: function(data) {
                        if(data.error) {
                            alert(data.error);
                            return;
                        }
                        // Update Header Count
                        $('.cart-count').text(data.qty);
                        
                        // Update Sidebar HTML if present
                        if ($('.cart-sidebar').length && data.cart_html) {
                            var isSidebarActive = $('.cart-sidebar').hasClass('active');
                            $('.cart-sidebar').html(data.cart_html);
                            // If sidebar was active and we're on cart page, we might not want to close it or reset validation
                            // But replacing HTML removes event handlers attached to internal elements? 
                            // Event delegation $(document).on handles the +/- buttons, so it's fine.
                            // Close button re-bind might be needed if not delegated.
                        }
                        
                        // If on Cart Page, update totals
                        if (window.location.pathname.includes('/cart/')) {
                            // Update total price
                            $('.cart-total-price').text(data.total_price + ' ر.س');
                        }
                    }
                });
            });

            // AJAX Remove Item Logic
            let productToDeleteId = null;

            // 1. Trigger Modal
            $(document).on('click', '.cart-remove-btn', function(e) {
                e.preventDefault();
                productToDeleteId = $(this).data('id');
                if(!productToDeleteId) return;
                
                $('#deleteConfirmModal').modal('show');
            });

            // 2. Handle Confirm Click
            $('#confirmDeleteBtn').on('click', function() {
                if(!productToDeleteId) return;
                const btn = this;
                const productId = btn.getAttribute('data-id');
                const itemType = btn.getAttribute('data-type') || 'product'; // Default to product
                if(!productId) return;
                
                // Hide Modal
                $('#deleteConfirmModal').modal('hide');

                $.ajax({
                    url: '{% url "cart:cart_remove" %}',
                    type: 'POST',
                    data: {
                        'product_id': productToDeleteId,
                        'item_type': 'product', // TODO: Need to dynamically get type from button
                        'csrfmiddlewaretoken': '{{ csrf_token }}'
                    },
                    success: function(data) {
                        // Update Sidebar HTML if present
                        if ($('.cart-sidebar').length && data.cart_html) {
                            $('.cart-sidebar').html(data.cart_html);
                        }
                        
                        // If on Cart Page
                         if (window.location.pathname.includes('/cart/')) {
                            // Helper to animate removal
                            const row = $('#cart-row-' + productToDeleteId);
                            if(row.length) {
                                row.fadeOut(300, function() { 
                                    $(this).remove(); 
                                    // Check if empty
                                    if($('.table-list tbody tr').length === 0) {
                                        $('.table-list tbody').html('<tr><td colspan="7" class="text-center">سلة المشتريات فارغة حالياً.</td></tr>');
                                        $('.checkout-process, .checkout-charge').fadeOut();
                                    }
                                });
                            }
                            
                            // Update totals immediately (data.total_price is already updated from server)
                            $('.cart-total-price').text(data.total_price + ' ر.س');
                        }
                    },
                    error: function(err) {
                        console.error('Error removing item', err);
                    }
                });
            });
        });
    </script>
</body>

</html>