{% extends 'base.html' %}
{% load static %}

{% block content %}

<!--=====================================
                    PRODUCT DETAILS PART START
=======================================-->
<section class="inner-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-6">
                <div class="details-gallery">
                    <div class="details-label-group">
                        <label class="details-label new">{{ product.flag }}</label>
                        {% if product.old_price > 0 %}
                        <label class="details-label off">{{ product.new_price }}</label>
                        {% endif %}
                    </div>
                    <ul class="details-preview">
                        <li><img src="{{ product.image.url }}" alt="product"></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="details-content">
                    <h3 class="details-name">{{ product.name }}</h3>
                    <div class="details-meta">
                        <p>SKU:<span>{{ product.sku|default:"-" }}</span></p>
                        <p>BRAND:<a href="#">{{ product.brand.name|default:"-" }}</a></p>
                    </div>

                    <h3 class="details-price">
                        {% if product.old_price > 0 %}
                        <del>{{ product.old_price }}</del>
                        {% endif %}
                        {% if product.is_bundle %}
                        <div style="font-size: 0.9em; color: #666; margin-bottom: 5px;">
                            <span style="text-decoration: line-through;">{{ product.bundle_base_price }} ريال</span>
                            <span style="color: #28a745; font-weight: bold;">(وفر {{ product.bundle_discount }}
                                ريال)</span>
                        </div>
                        <span>{{ product.bundle_total_price }}<small>ريال</small></span>
                        {% else %}
                        <span>{{ product.new_price }}<small>/قطعة</small></span>
                        {% endif %}
                    </h3>
                    <p class="details-desc">{{ product.descriptions }}</p>

                    {% if product.bundle_items.exists %}
                    <div class="details-list-group">
                        <label class="details-list-title">محتويات العرض:</label>
                        <ul class="details-tag-list">
                            {% for bundle_item in product.bundle_items.all %}
                            <li style="width: 100%; margin-bottom: 10px;">
                                <div
                                    style="display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #eee; padding-bottom: 5px;">
                                    <span>
                                        <span style="font-weight: bold; color: #007bff;">{{ bundle_item.quantity
                                            }}x</span>
                                        <a href="{% url 'product_detail' bundle_item.item.slug %}">{{
                                            bundle_item.item.name }}</a>
                                    </span>
                                    <span style="color: #666;">
                                        سعر القطعة: {{ bundle_item.item.new_price }} ريال
                                    </span>
                                </div>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                    {% endif %}

                    <div class="details-list-group">
                        <label class="details-list-title">Tags:</label>
                        <ul class="details-tag-list">
                            {% for tag in product.tags.all %}
                            <li><a href="#">{{ tag }}</a></li>
                            {% endfor %}
                        </ul>
                    </div>

                    <div class="details-add-group">
                        <button class="product-add" title="Add to Cart">
                            <i class="fas fa-shopping-basket"></i>
                            <span>أضف للسلة</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!--=====================================
                    PRODUCT DETAILS PART END
=======================================-->
{% endblock %}